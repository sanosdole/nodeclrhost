@page "/"
@page "/index.html"

@inject NavigationManager UriHelper

<h1>Hello, world!</h1>

Welcome to your new app.
<br/>
You are at address: @LocationPath



@code {
    static readonly char[] _queryOrHashStartChar = new[] { '?', '#' };
    string LocationPath = null;
    string _baseUri;
    string _locationAbsolute;

    protected override void OnInitialized()
    {
        /*UriHelper.LocationChanged += OnLocationChanged;
        _baseUri = UriHelper.GetBaseUri();
        _locationAbsolute = UriHelper.GetAbsoluteUri();
        LocationPath = UriHelper.ToBaseRelativePath(_baseUri, _locationAbsolute);
        LocationPath = StringUntilAny(LocationPath, _queryOrHashStartChar);*/
    }

    private string StringUntilAny(string str, char[] chars)
    {
        var firstIndex = str.IndexOfAny(chars);
        return firstIndex < 0
            ? str
            : str.Substring(0, firstIndex);
    }

    private void OnLocationChanged(object sender, LocationChangedEventArgs args)
    {
        /*_baseUri = UriHelper.GetBaseUri();
        _locationAbsolute = UriHelper.GetAbsoluteUri();
        LocationPath = UriHelper.ToBaseRelativePath(_baseUri, _locationAbsolute);
        LocationPath = StringUntilAny(LocationPath, _queryOrHashStartChar);        */
        StateHasChanged();
    }
}
